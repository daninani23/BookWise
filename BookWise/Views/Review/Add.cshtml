@using BookWise.Core.Models.Review;

@model ReviewFormModel

@{
    ViewData["Title"] = "Add Review";
    ViewBag.Button = "Add";
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>
<form method="post">
    <div class="form-group">
        <label asp-for="Rating" class="control-label">Rate this book:</label>
        <input type="hidden" id="ratingInput" name="Rating" class="form-control" min="1" max="5" step="1" />
        <span asp-validation-for="Rating" class="text-danger"></span>
    </div>
    <div class="rating">
        <span class="star" data-value="1">☆</span>
        <span class="star" data-value="2">☆</span>
        <span class="star" data-value="3">☆</span>
        <span class="star" data-value="4">☆</span>
        <span class="star" data-value="5">☆</span>
    </div>
    <div class="form-group">
        <label asp-for="ReviewText" class="control-label">What did you think of the book?</label>
        <textarea asp-for="ReviewText" class="form-control" rows="12"></textarea>
        <span asp-validation-for="ReviewText" class="text-danger"></span>
    </div>
    <br />
    <div class="btn-box">
        <input class="input-button" type="submit" value="@ViewBag.Button" />
    </div>
</form>


@section Scripts {
            <partial name="_ValidationScriptsPartial" />

}

<script>
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.getElementById('ratingInput');

    stars.forEach(star => {
        star.addEventListener('click', () => {
            const value = parseInt(star.getAttribute('data-value'));
            ratingInput.value = value; 
            highlightStars(value); 
        });
    });

    function highlightStars(value) {
        stars.forEach(star => {
            if (parseInt(star.getAttribute('data-value')) <= value) {
                star.innerHTML = '★';
            } else {
                star.innerHTML = '☆';
            }
        });
    }
</script>


